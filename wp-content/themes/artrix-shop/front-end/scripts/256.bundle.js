"use strict";(self.webpackChunkmy_shop=self.webpackChunkmy_shop||[]).push([[256],{256:(e,a,n)=>{function s(){$.validator.addMethod("strongPassword",function(e,a){return this.optional(a)||/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(e)},"The password must be at least 8 characters long and include uppercase and lowercase letters, numbers, and special characters."),$("#changePwdForm").on("submit",function(e){e.preventDefault()}),$("#changePwdForm").validate({rules:{email:{required:!0,email:!0,maxlength:100},code:{required:!0,digits:!0,minlength:4,maxlength:6},pwd:{required:!0,minlength:8,maxlength:50,strongPassword:!0},check_pwd:{required:!0,equalTo:"#pwd"}},messages:{email:{required:"Please enter your email address",email:"Please enter a valid email address",maxlength:"Email address cannot exceed 100 characters"},code:{required:"Please enter the verification code",digits:"Verification code can only contain digits",minlength:"Verification code must be at least 4 digits",maxlength:"Verification code cannot exceed 6 digits"},pwd:{required:"Please enter your new password",minlength:"Password must be at least 8 characters",maxlength:"Password cannot exceed 50 characters"},check_pwd:{required:"Please confirm your password",equalTo:"The two passwords do not match"}},submitHandler:function(e){!function(e){const a=$(e),n=a.find('button[type="submit"]'),s=n.text();if(n.prop("disabled"))return!1;n.prop("disabled",!0).text("Changing Password..."),$.ajax({url:a.attr("action"),type:"POST",data:a.serialize(),success:function(e){console.log("Change password response:",e),e&&200===e.code?(t(e.message||"Password changed successfully! Redirecting...","success"),setTimeout(function(){e.data&&e.data.url?window.location.href=e.data.url:window.location.href="/user-login/"},2e3)):(t(e.message||"Failed to change password, please try again","error"),n.prop("disabled",!1).text(s))},error:function(e){console.error("Change password failed:",e);let a="Failed to change password, please try again";if(e.responseJSON)e.responseJSON.message?a=e.responseJSON.message:e.responseJSON.data&&e.responseJSON.data.message&&(a=e.responseJSON.data.message);else if(e.responseText)try{const n=JSON.parse(e.responseText);n.message&&(a=n.message)}catch(n){switch(e.status){case 403:a="Verification failed, please check your input";break;case 404:a="Email address not found";break;case 500:a="Server error, please try again later"}}t(a,"error"),n.prop("disabled",!1).text(s)}})}(e)}}),function(){let e=null,a=0;function n(n,s,r,o){o.prop("disabled",!0).text("Sending..."),$.ajax({url:n,type:"POST",data:{email:s,type:r},success:function(n){n.success||200===n.code?(t("Verification code has been sent to your email","success"),function(n){a=60,n.text(`Resend (${a}s)`),e=setInterval(function(){a--,a>0?n.text(`Resend (${a}s)`):(clearInterval(e),n.prop("disabled",!1).text("Get Verification Code"),a=0)},1e3)}(o)):(t(n.message||"Failed to send, please try again","error"),o.prop("disabled",!1).text("Get Verification Code"))},error:function(e){console.error("Failed to send verification code:",e),t("Failed to send, please check your network connection","error"),o.prop("disabled",!1).text("Get Verification Code")}})}$(".js-emailcode").on("click",function(e){e.preventDefault();const s=$(this),r=$('input[name="email"]').val(),o=s.data("url"),i=s.data("type");r?function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(r)?a>0||n(o,r,i,s):t("Please enter a valid email address.","error"):t("Please enter your email address first.","error")})}()}function t(e,a="info"){$(".form-message").remove();const n=`\n        <div class="form-message form-message-${a}" style="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 15px 20px;\n            border-radius: 4px;\n            color: white;\n            font-size: 14px;\n            z-index: 9999;\n            max-width: 300px;\n            background-color: ${"success"===a?"#28a745":"error"===a?"#dc3545":"#17a2b8"};\n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n        ">\n            ${e}\n        </div>\n    `;$("body").append(n),setTimeout(function(){$(".form-message").fadeOut(300,function(){$(this).remove()})},3e3)}n.r(a),n.d(a,{default:()=>s}),n(960),$("head").length&&!$("#change-password-styles").length&&$("head").append('<div id="change-password-styles">\n<style>\n.error-field {\n    border-color: #dc3545 !important;\n    background-color: #fff5f5;\n}\n\n.valid-field {\n    border-color: #28a745 !important;\n}\n\n.error-message {\n    color: #dc3545;\n    font-size: 14px;\n    margin-top: 5px;\n    display: block;\n}\n\n.js-emailcode:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n\n.form-message {\n    animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n</style>\n</div>')}}]);